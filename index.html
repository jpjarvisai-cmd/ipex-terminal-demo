<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IPEX Terminal ‚Äî Builder Insolvency Intelligence</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --green:#3DEA7C;--green-dark:#2fd66c;--green-glow:rgba(61,234,124,.12);
  --navy:#0F172A;--navy-light:#1E293B;--navy-mid:#334155;
  --card-bg:rgba(30,41,59,.6);--card-border:rgba(255,255,255,.06);
  --red:#EF4444;--yellow:#F59E0B;--orange:#F97316;
  --bg:#0F172A;--font:'Poppins',sans-serif;
  --radius:16px;--text:#CBD5E1;--text-dim:#64748B;--text-bright:#F1F5F9;
}
[data-theme="light"]{
  --bg:#F8FAFC;--card-bg:rgba(255,255,255,.9);--card-border:rgba(15,23,42,.08);
  --text:#475569;--text-dim:#94A3B8;--text-bright:#0F172A;
}
html{scroll-behavior:smooth}
body{font-family:var(--font);font-weight:300;background:var(--bg);color:var(--text);min-height:100vh;display:flex;font-size:15px;line-height:1.6;-webkit-font-smoothing:antialiased}

/* SIDEBAR */
.sidebar{width:260px;background:var(--navy);padding:28px 20px;flex-shrink:0;display:flex;flex-direction:column;min-height:100vh;border-right:1px solid var(--card-border);position:sticky;top:0;height:100vh}
[data-theme="light"] .sidebar{background:#fff;border-right:1px solid #E2E8F0}
.sidebar-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:40px}
.sidebar-logo img{height:18px;width:auto}
.sidebar-logo .logo-light{display:none}
.sidebar-logo .logo-dark{display:block}
[data-theme="light"] .sidebar-logo .logo-light{display:block}
[data-theme="light"] .sidebar-logo .logo-dark{display:none}
.theme-toggle{width:28px;height:28px;border-radius:50%;border:1px solid rgba(255,255,255,.12);background:transparent;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;transition:all .2s}
[data-theme="light"] .theme-toggle{border-color:#E2E8F0}
.theme-toggle:hover{border-color:var(--green)}
.toggle-icon{font-size:.7rem;color:var(--text-dim)}
.sidebar nav{display:flex;flex-direction:column;gap:2px}
.sidebar nav a{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:10px;color:var(--text-dim);font-size:.85rem;font-weight:400;transition:all .15s;cursor:pointer;letter-spacing:.01em}
.sidebar nav a:hover{color:var(--text-bright);background:rgba(255,255,255,.05)}
[data-theme="light"] .sidebar nav a:hover{background:rgba(0,0,0,.03)}
.sidebar nav a.active{color:var(--text-bright);background:rgba(61,234,124,.08);font-weight:500}
.nav-icon{width:18px;text-align:center;font-size:.85rem}
.nav-count{margin-left:auto;background:var(--red);color:#fff;font-size:.6rem;font-weight:600;min-width:18px;height:18px;border-radius:9px;display:flex;align-items:center;justify-content:center;padding:0 5px}
.nav-divider{height:1px;background:var(--card-border);margin:12px 0}
.sidebar-footer{margin-top:auto;padding-top:20px;border-top:1px solid var(--card-border)}
.sidebar-user{display:flex;align-items:center;gap:10px}
.sidebar-user .avatar{width:32px;height:32px;border-radius:10px;background:var(--green);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.7rem;color:var(--navy)}
.sidebar-user .name{font-size:.82rem;color:var(--text-bright);font-weight:400}
.sidebar-user .role{font-size:.7rem;color:var(--text-dim)}
.nav-section{margin:16px 0 8px;font-size:.68rem;font-weight:500;color:var(--text-dim);text-transform:uppercase;letter-spacing:.08em;padding-left:14px}
.nav-builder{position:relative}
.new-indicator{position:absolute;left:-6px;top:50%;transform:translateY(-50%);width:8px;height:8px;background:var(--red);border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1;transform:translateY(-50%) scale(1)}50%{opacity:.6;transform:translateY(-50%) scale(1.1)}}

/* MAIN */
.main{flex:1;min-width:0;overflow-y:auto}
.page{display:none;animation:fadeIn .3s ease}.page.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.container{max-width:1100px;margin:0 auto;padding:40px 48px}

/* HERO */
.hero{padding:56px 0 48px;text-align:center}
.hero-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);border-radius:24px;padding:6px 16px;font-size:.75rem;font-weight:500;color:var(--red);margin-bottom:24px;letter-spacing:.02em}
.hero-badge .dot{width:6px;height:6px;border-radius:50%;background:var(--red);animation:blink 2s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}
.hero h1{font-size:2.4rem;font-weight:700;color:var(--text-bright);line-height:1.2;margin-bottom:16px;letter-spacing:-.02em}
.hero h1 .accent{color:var(--green)}
.hero p{font-size:1.05rem;color:var(--text-dim);max-width:640px;margin:0 auto;line-height:1.7;font-weight:300}

/* BIG STATS */
.big-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:2px;background:var(--card-border);border-radius:var(--radius);overflow:hidden;margin-bottom:48px}
.big-stat{background:var(--card-bg);padding:36px 32px;text-align:center;backdrop-filter:blur(12px)}
[data-theme="light"] .big-stat{background:#fff}
.big-stat-value{font-size:2.8rem;font-weight:700;color:var(--text-bright);line-height:1;margin-bottom:8px;letter-spacing:-.03em}
.big-stat-value.red{color:var(--red)}
.big-stat-value.green{color:var(--green)}
.big-stat-label{font-size:.8rem;color:var(--text-dim);line-height:1.4;font-weight:300}

/* BUILDER CARDS */
.section-label{font-size:.7rem;font-weight:500;color:var(--text-dim);text-transform:uppercase;letter-spacing:.1em;margin-bottom:16px}
.builder-list{display:flex;flex-direction:column;gap:8px;margin-bottom:48px}
.builder-card{background:var(--card-bg);backdrop-filter:blur(12px);border:1px solid var(--card-border);border-radius:14px;padding:20px 28px;display:grid;grid-template-columns:1fr auto auto auto auto;align-items:center;gap:24px;cursor:pointer;transition:all .2s}
[data-theme="light"] .builder-card{background:#fff;border-color:#E2E8F0}
.builder-card:hover{border-color:rgba(61,234,124,.25);transform:translateY(-1px);box-shadow:0 8px 32px rgba(0,0,0,.12)}
.builder-card.highlight{border-left:3px solid var(--red);background:rgba(239,68,68,.03)}
.bc-info .bc-name{font-size:.95rem;font-weight:600;color:var(--text-bright);margin-bottom:2px}
.bc-info .bc-meta{font-size:.78rem;color:var(--text-dim);font-weight:300}
.bc-stat{text-align:right;min-width:80px}
.bc-stat-value{font-size:1.15rem;font-weight:600;color:var(--text-bright);line-height:1.2}
.bc-stat-value.red{color:var(--red)}
.bc-stat-value.yellow{color:var(--yellow)}
.bc-stat-label{font-size:.65rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.04em;font-weight:400}
.tag{font-size:.65rem;font-weight:500;padding:4px 12px;border-radius:8px;letter-spacing:.02em;white-space:nowrap}
.tag.new{background:rgba(239,68,68,.1);color:var(--red);border:1px solid rgba(239,68,68,.2)}
.tag.done{background:var(--green-glow);color:var(--green);border:1px solid rgba(61,234,124,.15)}

/* DETAIL PAGE */
.back-link{display:inline-flex;align-items:center;gap:6px;font-size:.82rem;color:var(--text-dim);cursor:pointer;margin-bottom:28px;font-weight:400;transition:color .15s}
.back-link:hover{color:var(--green)}
.detail-hero{margin-bottom:40px}
.detail-hero h2{font-size:1.8rem;font-weight:700;color:var(--text-bright);margin-bottom:6px;letter-spacing:-.01em}
.detail-hero .meta{font-size:.85rem;color:var(--text-dim);font-weight:300}

/* ALERT BANNER */
.alert-banner{background:rgba(239,68,68,.06);border:1px solid rgba(239,68,68,.15);border-radius:14px;padding:24px 28px;margin-bottom:32px;display:flex;align-items:center;gap:20px}
[data-theme="light"] .alert-banner{background:#FEF2F2;border-color:#FECACA}
.alert-banner .icon{font-size:1.4rem;flex-shrink:0}
.alert-banner .content{flex:1}
.alert-banner .label{font-size:.7rem;font-weight:600;color:var(--red);text-transform:uppercase;letter-spacing:.06em;margin-bottom:2px}
.alert-banner .detail{font-size:.88rem;color:var(--text);font-weight:300}
.alert-banner .score{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);border-radius:12px;padding:12px 16px;text-align:center;flex-shrink:0}
.alert-banner .score-val{font-size:1.4rem;font-weight:700;color:var(--red)}
.alert-banner .score-label{font-size:.6rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.05em}

/* INFO GRID */
.info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-bottom:36px}
.info-item{background:var(--card-bg);backdrop-filter:blur(12px);border:1px solid var(--card-border);border-radius:12px;padding:18px 20px}
[data-theme="light"] .info-item{background:#fff;border-color:#E2E8F0}
.info-item .label{font-size:.65rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.06em;margin-bottom:6px;font-weight:400}
.info-item .value{font-size:1rem;font-weight:500;color:var(--text-bright)}

/* FINDINGS */
.findings{background:linear-gradient(135deg,rgba(239,68,68,.04),rgba(245,158,11,.04));border:1px solid rgba(239,68,68,.12);border-radius:var(--radius);padding:32px;margin-bottom:36px;text-align:center}
[data-theme="light"] .findings{background:linear-gradient(135deg,#FEF2F2,#FFFBEB)}
.findings-title{font-size:.8rem;font-weight:600;color:var(--red);text-transform:uppercase;letter-spacing:.08em;margin-bottom:20px}
.findings-row{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
.finding .f-value{font-size:2.2rem;font-weight:700;color:var(--red);line-height:1}
.finding .f-label{font-size:.78rem;color:var(--text-dim);margin-top:6px;font-weight:300;line-height:1.4}

/* TABLE */
.table-section{margin-bottom:36px}
.table-header{font-size:.95rem;font-weight:600;color:var(--text-bright);margin-bottom:16px}
table{width:100%;border-collapse:collapse}
table th{text-align:left;font-size:.65rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.06em;padding:10px 16px;border-bottom:1px solid var(--card-border);font-weight:400}
table td{padding:14px 16px;font-size:.85rem;border-bottom:1px solid var(--card-border);font-weight:300;color:var(--text)}
table tr:hover{background:rgba(255,255,255,.02)}
[data-theme="light"] table tr:hover{background:#F8FAFC}
.proj-name{font-weight:500;color:var(--text-bright);margin-bottom:1px}
.proj-addr{font-size:.75rem;color:var(--text-dim)}
.badge-won{display:inline-block;background:rgba(239,68,68,.1);color:var(--red);font-size:.7rem;font-weight:500;padding:2px 10px;border-radius:6px}

/* CTA */
.cta-card{background:linear-gradient(135deg,var(--navy-light),var(--navy));border:1px solid rgba(61,234,124,.12);border-radius:var(--radius);padding:48px;text-align:center;margin-bottom:36px}
[data-theme="light"] .cta-card{background:linear-gradient(135deg,#F0FDF4,#ECFDF5);border-color:rgba(61,234,124,.2)}
.cta-card h3{font-size:1.3rem;font-weight:600;color:var(--text-bright);margin-bottom:12px;letter-spacing:-.01em}
.cta-card p{font-size:.9rem;color:var(--text-dim);max-width:560px;margin:0 auto 24px;line-height:1.7;font-weight:300}
.cta-btn{display:inline-flex;align-items:center;gap:8px;background:var(--green);color:var(--navy);font-weight:600;font-size:.88rem;padding:12px 28px;border-radius:10px;text-decoration:none;transition:all .2s;letter-spacing:.01em}
.cta-btn:hover{background:var(--green-dark);transform:translateY(-1px);box-shadow:0 8px 24px rgba(61,234,124,.25)}

/* ARTICLE */
.article{max-width:680px}
.article h3{font-size:1.15rem;font-weight:600;color:var(--text-bright);margin:36px 0 16px;letter-spacing:-.01em}
.article h3:first-child{margin-top:0}
.article p{font-size:.92rem;color:var(--text);line-height:1.8;margin-bottom:16px;font-weight:300}
.article ul{margin:0 0 16px 20px;color:var(--text);font-size:.92rem;line-height:2;font-weight:300}
.article .red{color:var(--red);font-weight:500}
.article .green{color:var(--green);font-weight:500}
.article .bold{color:var(--text-bright);font-weight:500}

/* TIMELINE */
.timeline{margin-bottom:36px}
.tl-item{display:flex;gap:16px;padding:16px 0;border-bottom:1px solid var(--card-border)}
.tl-item:last-child{border:none}
.tl-dot{width:10px;height:10px;border-radius:50%;margin-top:5px;flex-shrink:0}
.tl-dot.red{background:var(--red);box-shadow:0 0 8px rgba(239,68,68,.3)}
.tl-dot.yellow{background:var(--yellow)}
.tl-dot.green{background:var(--green)}
.tl-date{font-size:.72rem;color:var(--text-dim);margin-bottom:2px;font-weight:400}
.tl-text{font-size:.88rem;color:var(--text);font-weight:300;line-height:1.6}
.tl-text strong{color:var(--text-bright);font-weight:500}

/* FORM */
.form-section{margin-bottom:36px}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-bottom:20px}
.form-group{margin-bottom:20px}
.form-group label{display:block;font-size:.85rem;font-weight:500;color:var(--text-bright);margin-bottom:8px}
.form-group input,.form-group textarea,.form-group select{width:100%;padding:12px 16px;border:1px solid var(--card-border);border-radius:8px;background:var(--card-bg);color:var(--text);font-size:.9rem;transition:border-color .2s}
[data-theme="light"] .form-group input,[data-theme="light"] .form-group textarea,[data-theme="light"] .form-group select{background:#fff}
.form-group input:focus,.form-group textarea:focus,.form-group select:focus{outline:none;border-color:var(--green)}
.form-group textarea{resize:vertical;min-height:100px}
.form-actions{display:flex;gap:12px}
.btn{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s;border:none}
.btn-primary{background:var(--green);color:var(--navy)}
.btn-primary:hover{background:var(--green-dark)}
.btn-secondary{background:var(--card-bg);color:var(--text);border:1px solid var(--card-border)}
.btn-secondary:hover{border-color:var(--green)}
.success-message{background:rgba(61,234,124,.1);border:1px solid rgba(61,234,124,.2);border-radius:8px;padding:16px;color:var(--green);font-size:.9rem;margin-top:16px;display:none}
.lookup-group{display:flex;gap:12px}
.lookup-group input{flex:1}
.lookup-btn{background:var(--card-bg);border:1px solid var(--card-border);color:var(--text);padding:12px 16px;border-radius:8px;cursor:pointer;transition:all .2s}
.lookup-btn:hover{border-color:var(--green)}

/* CONTACTS */
.empty-state{text-align:center;padding:80px 40px;color:var(--text-dim)}
.empty-state h3{font-size:1.1rem;margin-bottom:12px;color:var(--text-bright)}
.empty-state p{font-size:.9rem;line-height:1.6}
.filters{display:flex;gap:16px;margin-bottom:24px;flex-wrap:wrap}
.filters select,.filters input{padding:8px 12px;border:1px solid var(--card-border);border-radius:6px;background:var(--card-bg);color:var(--text);font-size:.85rem}
[data-theme="light"] .filters select,[data-theme="light"] .filters input{background:#fff}
.contact-status{padding:4px 12px;border-radius:6px;font-size:.75rem;font-weight:500;cursor:pointer}
.status-not_contacted{background:rgba(148,163,184,.2);color:var(--text-dim)}
.status-contacted{background:rgba(245,158,11,.2);color:var(--yellow)}
.status-interested{background:rgba(59,130,246,.2);color:#3B82F6}
.status-meeting_booked{background:rgba(139,69,193,.2);color:#8B45C1}
.status-proposal_sent{background:rgba(34,197,94,.2);color:#22C55E}
.status-won{background:rgba(61,234,124,.2);color:var(--green)}
.status-not_interested{background:rgba(239,68,68,.2);color:var(--red)}

/* ACTIVITY FEED */
.activity-feed{margin-top:48px}
.activity-item{display:flex;align-items:center;gap:12px;padding:12px 0;font-size:.85rem;color:var(--text-dim)}
.activity-dot{width:8px;height:8px;border-radius:50%;background:var(--green);flex-shrink:0}
.activity-time{margin-left:auto;font-size:.75rem}

/* RESPONSIVE */
@media(max-width:960px){
  .sidebar{display:none}
  .container{padding:24px 20px}
  .big-stats{grid-template-columns:1fr}
  .builder-card{grid-template-columns:1fr;gap:12px}
  .findings-row{grid-template-columns:1fr}
  .hero h1{font-size:1.6rem}
  .form-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-top">
    <div class="sidebar-logo">
      <img src="ipex-logo-dark.svg" alt="IPEX" class="logo-dark">
      <img src="ipex-logo-light.svg" alt="IPEX" class="logo-light">
    </div>
    <button class="theme-toggle" onclick="toggleTheme()"><span class="toggle-icon">‚òÄ</span></button>
  </div>
  <nav>
    <a class="active" id="nav-dash" onclick="go('dashboard')"><span class="nav-icon">üìä</span> Dashboard</a>
    
    <div class="nav-section">CASES</div>
    <div id="nav-builders"></div>
    
    <div class="nav-section">TOOLS</div>
    <a id="nav-contacts" onclick="go('contacts')"><span class="nav-icon">üë•</span> Contacts</a>
    <a id="nav-article" onclick="go('article')"><span class="nav-icon">üìù</span> The Problem</a>
    <a id="nav-add-case" onclick="go('addcase')"><span class="nav-icon">‚ûï</span> Add Case</a>
    
    <div class="nav-section">SYSTEM</div>
    <a id="nav-system"><span class="nav-icon">‚è∞</span> <span id="last-scan-time">No scans yet</span></a>
  </nav>
  <div class="sidebar-footer">
    <div class="sidebar-user">
      <div class="avatar">PR</div>
      <div><div class="name">Paul Reid</div><div class="role">CEO ‚Ä¢ IPEX</div></div>
    </div>
  </div>
</div>

<div class="main">

<!-- ===== DASHBOARD ===== -->
<div class="page active" id="p-dashboard">
<div class="container">
  <div class="hero">
    <div class="hero-badge"><span class="dot"></span> Live Intelligence</div>
    <h1>Builders are winning projects<br>while <span class="accent">trading insolvent</span></h1>
    <p>Our research reveals a systemic failure in financial due diligence ‚Äî and the projects caught in the crossfire.</p>
  </div>

  <div class="big-stats" id="big-stats">
    <div class="big-stat">
      <div class="big-stat-value red" id="stat-value">-</div>
      <div class="big-stat-label">in projects won by builders<br>during confirmed insolvent trading</div>
    </div>
    <div class="big-stat">
      <div class="big-stat-value" id="stat-days">-</div>
      <div class="big-stat-label">average days trading insolvent<br>before entering administration</div>
    </div>
    <div class="big-stat">
      <div class="big-stat-value red" id="stat-projects">-</div>
      <div class="big-stat-label">projects awarded to builders<br>who couldn't pay their debts</div>
    </div>
  </div>

  <div class="section-label">Case Files ‚Äî Builder Analysis</div>
  <div class="builder-list" id="builderList"></div>

  <div class="activity-feed">
    <div class="section-label">System Activity</div>
    <div id="activity-items"></div>
  </div>

  <div class="cta-card">
    <h3>Traditional due diligence didn't catch any of these</h3>
    <p>Every one of these builders passed standard financial checks. Every one continued winning contracts while unable to meet existing obligations. The industry needs a better way.</p>
    <a class="cta-btn" href="mailto:info@ipex.com.au">Talk to IPEX ‚Üí</a>
  </div>
</div>
</div>

<!-- ===== BUILDER CASE FILE ===== -->
<div class="page" id="p-builder">
<div class="container">
  <div class="back-link" onclick="go('dashboard')">‚Üê Back to Dashboard</div>
  <div id="builder-content"></div>
</div>
</div>

<!-- ===== CONTACTS ===== -->
<div class="page" id="p-contacts">
<div class="container">
  <div class="back-link" onclick="go('dashboard')">‚Üê Back to Dashboard</div>
  <div class="detail-hero">
    <h2>Contact Management</h2>
    <div class="meta">Master directory of all affected parties across case files</div>
  </div>
  
  <div class="filters">
    <select id="filter-type">
      <option value="">All Types</option>
      <option value="developer">Developer</option>
      <option value="lender">Lender</option>
    </select>
    <select id="filter-status">
      <option value="">All Status</option>
      <option value="not_contacted">Not Contacted</option>
      <option value="contacted">Contacted</option>
      <option value="interested">Interested</option>
      <option value="meeting_booked">Meeting Booked</option>
      <option value="proposal_sent">Proposal Sent</option>
      <option value="won">Won</option>
      <option value="not_interested">Not Interested</option>
    </select>
    <select id="filter-builder">
      <option value="">All Builders</option>
    </select>
    <input type="text" id="filter-search" placeholder="Search contacts...">
  </div>
  
  <div class="empty-state">
    <h3>No contacts added yet</h3>
    <p>Contacts will appear here as case files are completed.<br>Our research team is working to populate developer and lender contact information for each affected project.</p>
  </div>
</div>
</div>

<!-- ===== THE PROBLEM (Article) ===== -->
<div class="page" id="p-article">
<div class="container">
  <div class="back-link" onclick="go('dashboard')">‚Üê Back to Dashboard</div>
  <div class="article">
    <h3>'Insolvent' Builders Winning New Projects?</h3>
    <p>When a commercial builder enters administration, headlines naturally gravitate towards what they might owe, before attention turns to why they failed. And while the specific circumstances may vary, each collapse is inevitably chalked up to a version of "difficult market conditions beyond the builder's control."</p>
    <p>But there's a third element that's rarely discussed. Even if we accept that the ultimate outcome was unavoidable, we may need to start questioning <span class="bold">the timing</span> of these decisions. When should these builders have entered administration? Were the impacted developers (and subcontractors) all truly just 'unlucky', or did some engage builders who were <span class="red">already in significant financial distress</span>?</p>
    <p>You'd assume that an inability to meet existing financial obligations would rule out any possibility of a builder winning a new contract, but our review of builders that have entered administration since early 2023 reveals that it is <span class="bold">typical</span> for commercial builders to:</p>
    <ul>
      <li>Have been <span class="red">trading insolvent for approximately 6 months</span></li>
      <li>Have won the majority of projects that were in progress at the time they entered administration in the <span class="red">6 months prior to</span> or <span class="red">during</span> the insolvent trading period</li>
    </ul>
    <p>Several were deemed to have been trading insolvent for over 12 months and, while it's disturbing enough to think that a builder could 'satisfy' financial due diligence requirements just months prior to becoming insolvent, it gets worse ‚Äî <span class="red">most were able to secure at least one new contract during the insolvent trading period</span>.</p>

    <h3>'Point in Time' Financial Due Diligence is Failing</h3>
    <p>It's clear why a builder might be tempted to push the boundaries in trying to save their business, but the fact that such dire cashflow troubles were not able to be identified will be keeping developers & lenders up at night.</p>
    <p>Can an external party ever hope to reliably distinguish between realistic & overly 'optimistic' cost-to-complete/cashflow forecasts, or identify when critical financial information is incomplete, out of date, or otherwise misleading?</p>
    <p>And as much as we'd like to think that the worst is behind us, <span class="red">builder insolvency is a perennial risk</span> ‚Äî up a further 21% on FY24 according to the latest ASIC data, including multiple high-profile casualties. It's not going away.</p>

    <h3>Your Builder Doesn't Need to Go Under to Ruin Your Project</h3>
    <p>Although builder insolvencies are still relatively rare within the commercial construction sector, the administrator's findings confirm that <span class="bold">cashflow trouble often begins long before signs of distress become outwardly apparent</span>.</p>
    <p>The main source of nervousness for developers we speak with is the <span class="bold">'contagion effect'</span> ‚Äî the considerably more likely risk that progress payments might be used to cashflow their builder's troubled projects. They end up (involuntarily) paying another developer's bills, while their project inherits the cash shortfall.</p>
    <p>For every insolvency that makes the news, there are countless other instances in which the developer is quietly strong-armed into paying significant sums of money outside of the contract to get their project to completion.</p>

    <h3>'Best Practice' is No Longer Best Practice</h3>
    <p>Developers & lenders are continually asking their builders to prove that they're financially sound and that they pay their subbies. The problem is, the industry-standard checks & balances don't actually 'prove' anything.</p>
    <p>Both legally & practically <span class="green">isolating each development from all others is fast becoming the preferred approach</span>. As more developers & lenders put a 'ring-fence' around progress payments, the pool of projects that a distressed builder can 'borrow' from gets smaller.</p>
    <p>No matter how thorough your builder-vetting process, if you're still paying into your builder's operating account & pinning your hopes on that monthly 'stat dec' being true, the chances of your project being impacted are only going up.</p>

    <div class="cta-card" style="margin-top:40px">
      <h3>Want to prevent builder cashflow issues from impacting your project?</h3>
      <p>IPEX ring-fences progress payments at the project level, ensuring your money stays on your project ‚Äî not funding someone else's shortfall.</p>
      <a class="cta-btn" href="mailto:info@ipex.com.au">info@ipex.com.au</a>
      <div style="font-size:.8rem;color:var(--text-dim);margin-top:12px">(03) 8456 8032</div>
    </div>
    <p style="font-size:.72rem;color:var(--text-dim);margin-top:20px;font-style:italic">*Insolvent trading period based on the administrator-indicated trading insolvent date. Research conducted by MC & James Curtis.</p>
  </div>
</div>
</div>

<!-- ===== ADD CASE ===== -->
<div class="page" id="p-addcase">
<div class="container">
  <div class="back-link" onclick="go('dashboard')">‚Üê Back to Dashboard</div>
  <div class="detail-hero">
    <h2>Add New Case</h2>
    <div class="meta">Submit a new builder for insolvency intelligence analysis</div>
  </div>

  <form id="add-case-form" onsubmit="return submitCase(event)">
    <div class="form-grid">
      <div class="form-group">
        <label for="builder-name">Builder Name *</label>
        <input type="text" id="builder-name" required>
      </div>
      <div class="form-group">
        <label for="builder-abn">ABN</label>
        <div class="lookup-group">
          <input type="text" id="builder-abn" placeholder="12 345 678 901">
          <button type="button" class="lookup-btn" onclick="lookupABN()">Lookup</button>
        </div>
      </div>
    </div>
    
    <div class="form-grid">
      <div class="form-group">
        <label for="admin-date">Administration Date</label>
        <input type="date" id="admin-date">
      </div>
      <div class="form-group">
        <label for="administrator">Administrator</label>
        <input type="text" id="administrator" placeholder="e.g., Worrells, McGrathNicol">
      </div>
    </div>
    
    <div class="form-grid">
      <div class="form-group">
        <label for="admin-type">Type of Administration</label>
        <select id="admin-type">
          <option value="">Select type</option>
          <option value="Voluntary Administration">Voluntary Administration</option>
          <option value="Liquidation">Liquidation</option>
          <option value="Receivership">Receivership</option>
          <option value="DOCA">Deed of Company Arrangement</option>
        </select>
      </div>
      <div class="form-group">
        <label for="insolvency-start">Est. Insolvency Start Date</label>
        <input type="date" id="insolvency-start">
      </div>
    </div>
    
    <div class="form-group">
      <label for="source-url">Source URL</label>
      <input type="url" id="source-url" placeholder="https://asic.gov.au/...">
    </div>
    
    <div class="form-group">
      <label for="notes">Notes</label>
      <textarea id="notes" placeholder="Additional context, source information, or research notes..."></textarea>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Create Case</button>
      <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
    </div>
    
    <div class="success-message" id="success-message">
      ‚úÖ Case created. Research pipeline will be triggered.
    </div>
  </form>
</div>
</div>

</div>

<script>
// Global data
let buildersData = null;
let contactsData = null;
let monitoringData = null;
let currentBuilder = null;

// Load data on page load
document.addEventListener('DOMContentLoaded', async function() {
  try {
    // Load all data files
    const [builders, contacts, monitoring] = await Promise.all([
      fetch('data/builders.json').then(r => r.json()),
      fetch('data/contacts.json').then(r => r.json()),
      fetch('data/monitoring.json').then(r => r.json())
    ]);
    
    buildersData = builders;
    contactsData = contacts;
    monitoringData = monitoring;
    
    // Initialize the dashboard
    initDashboard();
    initSidebar();
    
    // Load theme
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
    updateToggleIcon();
    
  } catch (error) {
    console.error('Error loading data:', error);
  }
});

function initDashboard() {
  if (!buildersData) return;
  
  // Update big stats with calculated values
  const meta = buildersData.meta;
  document.getElementById('stat-value').textContent = formatCurrency(meta.totalValueAtRisk);
  document.getElementById('stat-days').textContent = meta.avgDaysInsolvent + ' days';
  document.getElementById('stat-projects').textContent = meta.totalProjectsAtRisk;
  
  // Generate builder cards
  const builderList = document.getElementById('builderList');
  builderList.innerHTML = '';
  
  // Sort builders by administration date (newest first)
  const sortedBuilders = [...buildersData.builders].sort((a, b) => {
    const dateA = new Date(a.insolvency.administrationDate);
    const dateB = new Date(b.insolvency.administrationDate);
    return dateB - dateA;
  });
  
  sortedBuilders.forEach(builder => {
    const card = createBuilderCard(builder);
    builderList.appendChild(card);
  });
  
  // Update activity feed
  updateActivityFeed();
}

function initSidebar() {
  if (!buildersData) return;
  
  // Populate builders navigation
  const navBuilders = document.getElementById('nav-builders');
  navBuilders.innerHTML = '';
  
  buildersData.builders.forEach(builder => {
    const navItem = document.createElement('a');
    navItem.className = 'nav-builder';
    navItem.onclick = () => go('builder', builder.id);
    
    if (builder.status === 'new') {
      navItem.innerHTML = `<span class="new-indicator"></span><span class="nav-icon">üìã</span> ${builder.name}`;
    } else {
      navItem.innerHTML = `<span class="nav-icon">üìã</span> ${builder.name}`;
    }
    
    navBuilders.appendChild(navItem);
  });
  
  // Update last scan time
  const lastScanEl = document.getElementById('last-scan-time');
  if (monitoringData.lastScan) {
    const scanDate = new Date(monitoringData.lastScan);
    lastScanEl.textContent = `Last scan: ${scanDate.toLocaleDateString()}`;
  } else {
    lastScanEl.textContent = 'No scans yet';
  }
}

function createBuilderCard(builder) {
  const card = document.createElement('div');
  card.className = `builder-card ${builder.status === 'new' ? 'highlight' : ''}`;
  card.onclick = () => go('builder', builder.id);
  
  const adminDate = new Date(builder.insolvency.administrationDate);
  const formattedDate = adminDate.toLocaleDateString('en-AU', { day: '2-digit', month: 'short', year: 'numeric' });
  
  // Calculate stats
  const daysInsolvent = builder.insolvency.daysInsolventTrading;
  const projectsAtRisk = builder.summary.totalProjectsAtRisk || 0;
  const valueAtRisk = builder.summary.totalValueAtRisk || 0;
  
  let meta = `${builder.state} ‚Ä¢ Administration: ${formattedDate}`;
  if (builder.abn) meta = `${builder.state} ‚Ä¢ ABN ${builder.abn} ‚Ä¢ ${formattedDate}`;
  if (builder.insolvency.administrator) meta += ` ‚Ä¢ ${builder.insolvency.administrator}`;
  
  card.innerHTML = `
    <div class="bc-info">
      <div class="bc-name">${builder.name}</div>
      <div class="bc-meta">${meta}</div>
    </div>
    <div class="bc-stat">
      <div class="bc-stat-value ${daysInsolvent === null ? 'yellow' : (daysInsolvent > 0 ? 'red' : 'yellow')}">
        ${daysInsolvent === null ? 'Pending' : (daysInsolvent === 0 ? '0 days' : daysInsolvent + ' days')}
      </div>
      <div class="bc-stat-label">Insolvent Period</div>
    </div>
    <div class="bc-stat">
      <div class="bc-stat-value ${projectsAtRisk > 0 ? 'red' : 'yellow'}">
        ${projectsAtRisk || 'TBC'}
      </div>
      <div class="bc-stat-label">Projects at Risk</div>
    </div>
    <div class="bc-stat">
      <div class="bc-stat-value ${valueAtRisk > 0 ? 'red' : 'yellow'}">
        ${valueAtRisk ? formatCurrency(valueAtRisk) : 'TBC'}
      </div>
      <div class="bc-stat-label">Value</div>
    </div>
    <span class="tag ${builder.status === 'new' ? 'new' : 'done'}">
      ${builder.status === 'new' ? '‚óè NEW CASE' : 'Complete'}
    </span>
  `;
  
  return card;
}

function updateActivityFeed() {
  const activityItems = document.getElementById('activity-items');
  activityItems.innerHTML = '';
  
  // Add monitoring activity
  if (monitoringData.lastScan) {
    const scanDate = new Date(monitoringData.lastScan);
    const item = document.createElement('div');
    item.className = 'activity-item';
    item.innerHTML = `
      <div class="activity-dot"></div>
      <div>System scan completed for new builder administrations</div>
      <div class="activity-time">${scanDate.toLocaleTimeString()}</div>
    `;
    activityItems.appendChild(item);
  }
  
  // Add recent builder updates
  const recentBuilders = buildersData.builders
    .filter(b => b.status === 'new')
    .slice(0, 3);
    
  recentBuilders.forEach(builder => {
    const adminDate = new Date(builder.insolvency.administrationDate);
    const item = document.createElement('div');
    item.className = 'activity-item';
    item.innerHTML = `
      <div class="activity-dot" style="background: var(--red)"></div>
      <div>New case: ${builder.name} entered administration</div>
      <div class="activity-time">${adminDate.toLocaleDateString()}</div>
    `;
    activityItems.appendChild(item);
  });
  
  if (activityItems.children.length === 0) {
    activityItems.innerHTML = '<div class="activity-item"><div class="activity-dot"></div><div>System monitoring active</div></div>';
  }
}

function go(page, builderId = null) {
  // Hide all pages
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  
  // Update navigation
  document.querySelectorAll('.sidebar nav a').forEach(a => a.classList.remove('active'));
  
  // Show target page
  if (page === 'builder' && builderId) {
    showBuilderDetail(builderId);
    document.getElementById('p-builder').classList.add('active');
  } else {
    document.getElementById(`p-${page}`).classList.add('active');
    
    // Update active nav
    const navEl = document.getElementById(`nav-${page}`);
    if (navEl) navEl.classList.add('active');
  }
}

function showBuilderDetail(builderId) {
  const builder = buildersData.builders.find(b => b.id === builderId);
  if (!builder) return;
  
  currentBuilder = builder;
  const content = document.getElementById('builder-content');
  
  // Build the detail page content
  let html = `
    <div class="detail-hero">
      <h2>${builder.name}</h2>
      <div class="meta">${builder.state}${builder.abn ? ` ‚Ä¢ ABN ${builder.abn}` : ''}${builder.acn ? ` ‚Ä¢ ACN ${builder.acn}` : ''}</div>
    </div>
  `;
  
  // Status banner for new cases
  if (builder.status === 'new') {
    html += `
      <div class="alert-banner">
        <div class="icon">üî¥</div>
        <div class="content">
          <div class="label">New Case ‚Äî Research in Progress</div>
          <div class="detail">${builder.insolvency.administrator ? builder.insolvency.administrator + ' appointed as administrators on ' + new Date(builder.insolvency.administrationDate).toLocaleDateString() + '. ' : ''}${builder.summary.narrative}</div>
        </div>
      </div>
    `;
  }
  
  // Key stats bar
  html += `
    <div class="info-grid">
      <div class="info-item">
        <div class="label">Projects at Risk</div>
        <div class="value" style="color: ${builder.summary.totalProjectsAtRisk > 0 ? 'var(--red)' : 'var(--yellow)'}">${builder.summary.totalProjectsAtRisk || 'TBC'}</div>
      </div>
      <div class="info-item">
        <div class="label">Total Value</div>
        <div class="value" style="color: ${builder.summary.totalValueAtRisk > 0 ? 'var(--red)' : 'var(--yellow)'}">${builder.summary.totalValueAtRisk ? formatCurrency(builder.summary.totalValueAtRisk) : 'TBC'}</div>
      </div>
      <div class="info-item">
        <div class="label">Developers Affected</div>
        <div class="value">${builder.summary.totalDevelopersAffected || 'TBC'}</div>
      </div>
      <div class="info-item">
        <div class="label">Lenders Affected</div>
        <div class="value">${builder.summary.totalLendersAffected || 'TBC'}</div>
      </div>
    </div>
  `;
  
  // More info grid
  html += `
    <div class="info-grid">
      <div class="info-item">
        <div class="label">Administration Date</div>
        <div class="value" style="color:var(--red)">${new Date(builder.insolvency.administrationDate).toLocaleDateString()}</div>
      </div>
      <div class="info-item">
        <div class="label">Administrator</div>
        <div class="value">${builder.insolvency.administrator || 'TBC'}</div>
      </div>
      <div class="info-item">
        <div class="label">Est Insolvency Start</div>
        <div class="value" style="color: ${builder.insolvency.estimatedInsolvencyStart ? 'var(--red)' : 'var(--yellow)'}">${builder.insolvency.estimatedInsolvencyStart ? new Date(builder.insolvency.estimatedInsolvencyStart).toLocaleDateString() : 'Pending Report'}</div>
      </div>
      <div class="info-item">
        <div class="label">Days Insolvent</div>
        <div class="value" style="color: ${builder.insolvency.daysInsolventTrading > 0 ? 'var(--red)' : 'var(--yellow)'}">${builder.insolvency.daysInsolventTrading === null ? 'Pending' : builder.insolvency.daysInsolventTrading + ' days'}</div>
      </div>
      <div class="info-item">
        <div class="label">Creditors Meeting</div>
        <div class="value">${builder.insolvency.creditorsMeetingDate ? new Date(builder.insolvency.creditorsMeetingDate).toLocaleDateString() : 'TBC'}</div>
      </div>
    </div>
  `;
  
  // Key findings banner (if projects exist)
  if (builder.projects && builder.projects.length > 0) {
    const projectsWonDuring = builder.projects.filter(p => p.wonDuringInsolvency).length;
    const valueWonDuring = builder.projects
      .filter(p => p.wonDuringInsolvency)
      .reduce((sum, p) => sum + (p.estimatedValue || 0), 0);
    
    html += `
      <div class="findings">
        <div class="findings-title">Key Findings</div>
        <div class="findings-row">
          <div class="finding">
            <div class="f-value">${projectsWonDuring}</div>
            <div class="f-label">Projects won during<br>insolvent trading period</div>
          </div>
          <div class="finding">
            <div class="f-value">${formatCurrency(valueWonDuring)}</div>
            <div class="f-label">Value of projects won<br>while trading insolvent</div>
          </div>
          <div class="finding">
            <div class="f-value">${builder.summary.totalDevelopersAffected || 0}</div>
            <div class="f-label">Developers affected by<br>insolvent trading</div>
          </div>
        </div>
      </div>
    `;
  }
  
  // Projects table
  if (builder.projects && builder.projects.length > 0) {
    const insolvencyProjects = builder.projects.filter(p => p.wonDuringInsolvency);
    
    html += `
      <div class="table-section">
        <div class="table-header">Projects Won During Insolvent Trading Period</div>
        <div style="overflow-x:auto">
          <table>
            <thead>
              <tr>
                <th>Project</th>
                <th>Developer</th>
                <th>Value</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
    `;
    
    insolvencyProjects.forEach(project => {
      html += `
        <tr>
          <td>
            <div class="proj-name">${project.projectName}</div>
            <div class="proj-addr">${project.address}</div>
          </td>
          <td>${project.developer || '‚Äî'}</td>
          <td style="font-weight:500;color:var(--text-bright)">${formatCurrency(project.estimatedValue)}</td>
          <td><span class="badge-won">${project.contractStatus}</span></td>
        </tr>
      `;
    });
    
    html += '</tbody></table></div></div>';
  }
  
  // Timeline
  if (builder.timeline && builder.timeline.length > 0) {
    html += '<div class="section-label" style="margin-top:36px">Timeline</div><div class="timeline">';
    
    builder.timeline.forEach(event => {
      const dotColor = event.type === 'administration' ? 'red' : 
                      event.type === 'insolvency' ? 'red' : 
                      event.type === 'project_won' ? 'yellow' : 'green';
      
      html += `
        <div class="tl-item">
          <div class="tl-dot ${dotColor}"></div>
          <div>
            <div class="tl-date">${new Date(event.date).toLocaleDateString()}</div>
            <div class="tl-text">${event.event}</div>
          </div>
        </div>
      `;
    });
    
    html += '</div>';
  }
  
  // Contacts section
  html += `
    <div class="section-label" style="margin-top:36px">Contacts</div>
    <div class="empty-state" style="padding:40px 20px">
      <h3>No contacts yet</h3>
      <p>Contact information will be populated as research is completed.</p>
    </div>
  `;
  
  // IPEX narrative
  if (builder.summary.narrative) {
    html += `
      <div class="section-label" style="margin-top:36px">IPEX Analysis</div>
      <p style="font-size:.92rem;line-height:1.7;margin-bottom:24px">${builder.summary.narrative}</p>
    `;
  }
  
  // Research metadata
  if (builder.research) {
    html += `
      <div class="section-label">Research Metadata</div>
      <div class="info-grid">
        <div class="info-item">
          <div class="label">Last Updated</div>
          <div class="value">${new Date(builder.research.lastUpdated).toLocaleDateString()}</div>
        </div>
        <div class="info-item">
          <div class="label">Research Team</div>
          <div class="value">${builder.research.researchedBy}</div>
        </div>
        <div class="info-item">
          <div class="label">Confidence Level</div>
          <div class="value" style="text-transform:capitalize">${builder.research.confidence}</div>
        </div>
        <div class="info-item">
          <div class="label">Data Sources</div>
          <div class="value" style="font-size:.85rem">${builder.research.dataSources.join(', ')}</div>
        </div>
      </div>
    `;
    
    if (builder.research.gaps) {
      html += `<p style="font-size:.85rem;color:var(--text-dim);margin:16px 0;"><strong>Research Gaps:</strong> ${builder.research.gaps}</p>`;
    }
  }
  
  // CTA
  const valueLost = builder.summary.totalValueAtRisk || 0;
  const ctaText = valueLost > 0 ? 
    `${builder.projects?.filter(p => p.wonDuringInsolvency).length || 0} projects worth ${formatCurrency(valueLost)} won while trading insolvent` :
    'This case file will be updated as information becomes available';
  
  const ctaSubtext = valueLost > 0 ?
    'Traditional due diligence didn\'t catch it. Every one of these developers had no way of knowing.' :
    `Our analysis methodology will be applied once the administrator's report is published.`;
  
  html += `
    <div class="cta-card">
      <h3>${ctaText}</h3>
      <p>${ctaSubtext}</p>
      <a class="cta-btn" href="mailto:info@ipex.com.au">Learn How IPEX Prevents This ‚Üí</a>
    </div>
  `;
  
  content.innerHTML = html;
}

function toggleTheme() {
  const current = document.documentElement.getAttribute('data-theme');
  const newTheme = current === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  updateToggleIcon();
}

function updateToggleIcon() {
  const theme = document.documentElement.getAttribute('data-theme');
  const icon = document.querySelector('.toggle-icon');
  icon.textContent = theme === 'dark' ? '‚òÄ' : 'üåô';
}

function formatCurrency(amount) {
  if (!amount) return '$0';
  
  if (amount >= 1000000) {
    return '$' + (amount / 1000000).toFixed(1) + 'M';
  } else if (amount >= 1000) {
    return '$' + (amount / 1000).toFixed(1) + 'K';
  }
  return '$' + amount.toLocaleString();
}

function submitCase(event) {
  event.preventDefault();
  
  // Collect form data
  const formData = {
    builderName: document.getElementById('builder-name').value,
    abn: document.getElementById('builder-abn').value,
    administrationDate: document.getElementById('admin-date').value,
    administrator: document.getElementById('administrator').value,
    adminType: document.getElementById('admin-type').value,
    estimatedInsolvencyStart: document.getElementById('insolvency-start').value,
    sourceUrl: document.getElementById('source-url').value,
    notes: document.getElementById('notes').value,
    submitted: new Date().toISOString()
  };
  
  // Store in localStorage (Phase 1 placeholder)
  const existingDrafts = JSON.parse(localStorage.getItem('ipex-case-drafts') || '[]');
  existingDrafts.push(formData);
  localStorage.setItem('ipex-case-drafts', JSON.stringify(existingDrafts));
  
  // Show success message
  document.getElementById('success-message').style.display = 'block';
  
  // Clear form after short delay
  setTimeout(() => {
    clearForm();
    document.getElementById('success-message').style.display = 'none';
  }, 3000);
  
  return false;
}

function clearForm() {
  document.getElementById('add-case-form').reset();
}

function lookupABN() {
  // Placeholder for ABN lookup functionality
  alert('ABN lookup functionality will be implemented in Phase 2. For now, please enter ABN manually if known.');
}
</script>

</body>
</html>