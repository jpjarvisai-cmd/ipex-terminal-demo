<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IPEX ‚Äî Builder Insolvency Intelligence</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
--green:#3DEA7C;--green-dark:#2fd66c;--green-glow:rgba(61,234,124,.08);
--navy:#0F172A;--navy-light:#1E293B;--navy-mid:#334155;
--card-bg:rgba(30,41,59,.55);--card-border:rgba(255,255,255,.06);
--red:#EF4444;--yellow:#F59E0B;--orange:#F97316;
--bg:#0B0F1A;--font:'Poppins',sans-serif;
--radius:14px;--text:#94A3B8;--text-dim:#64748B;--text-bright:#E2E8F0;
}
[data-theme="light"]{
--bg:#F1F5F9;--card-bg:rgba(255,255,255,.85);--card-border:rgba(15,23,42,.07);
--text:#475569;--text-dim:#94A3B8;--text-bright:#0F172A;--navy:#0F172A;--navy-light:#fff;
}
html{scroll-behavior:smooth}
body{font-family:var(--font);font-weight:300;background:var(--bg);color:var(--text);min-height:100vh;display:flex;font-size:14px;line-height:1.6;-webkit-font-smoothing:antialiased}
a{text-decoration:none;color:inherit}

/* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
.sidebar{width:240px;background:var(--navy);padding:24px 16px;flex-shrink:0;display:flex;flex-direction:column;min-height:100vh;border-right:1px solid var(--card-border);position:sticky;top:0;height:100vh;overflow-y:auto}
[data-theme="light"] .sidebar{background:#fff;border-right:1px solid #E2E8F0}
.sb-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:32px;padding:0 8px}
.sb-logo img{height:16px}
.sb-logo .logo-light{display:none}.sb-logo .logo-dark{display:block}
[data-theme="light"] .sb-logo .logo-light{display:block}
[data-theme="light"] .sb-logo .logo-dark{display:none}
.theme-btn{width:26px;height:26px;border-radius:50%;border:1px solid rgba(255,255,255,.1);background:transparent;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:.65rem;color:var(--text-dim);transition:.2s}
[data-theme="light"] .theme-btn{border-color:#E2E8F0}
.theme-btn:hover{border-color:var(--green);color:var(--green)}
nav{display:flex;flex-direction:column;gap:1px}
nav a{display:flex;align-items:center;gap:9px;padding:9px 12px;border-radius:8px;color:var(--text-dim);font-size:.8rem;font-weight:400;transition:.15s;cursor:pointer}
nav a:hover{color:var(--text-bright);background:rgba(255,255,255,.04)}
[data-theme="light"] nav a:hover{background:rgba(0,0,0,.03)}
nav a.active{color:var(--text-bright);background:rgba(61,234,124,.07);font-weight:500}
.nav-i{width:16px;text-align:center;font-size:.78rem;flex-shrink:0}
.nav-sec{margin:14px 0 6px;font-size:.62rem;font-weight:600;color:var(--text-dim);text-transform:uppercase;letter-spacing:.1em;padding-left:12px}
.nav-new{position:relative}
.pulse-dot{position:absolute;left:-4px;top:50%;transform:translateY(-50%);width:7px;height:7px;background:var(--red);border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1;transform:translateY(-50%) scale(1)}50%{opacity:.5;transform:translateY(-50%) scale(1.15)}}
.sb-footer{margin-top:auto;padding-top:16px;border-top:1px solid var(--card-border)}
.sb-user{display:flex;align-items:center;gap:9px;padding:4px 8px}
.sb-user .av{width:30px;height:30px;border-radius:8px;background:var(--green);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.65rem;color:var(--navy)}
.sb-user .nm{font-size:.78rem;color:var(--text-bright);font-weight:400}
.sb-user .rl{font-size:.65rem;color:var(--text-dim)}

/* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
.main{flex:1;min-width:0;overflow-y:auto}
.page{display:none;animation:fadeIn .25s ease}.page.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.wrap{max-width:1200px;margin:0 auto;padding:32px 40px}

/* ‚îÄ‚îÄ DASHBOARD HEADER ‚îÄ‚îÄ */
.dash-header{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid var(--card-border)}
.dash-header h1{font-size:1.4rem;font-weight:600;color:var(--text-bright);letter-spacing:-.01em}
.dash-header h1 span{color:var(--green)}
.dash-header .sub{font-size:.82rem;color:var(--text-dim);margin-top:4px;font-weight:300}
.live-badge{display:inline-flex;align-items:center;gap:5px;background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.15);border-radius:20px;padding:5px 14px;font-size:.72rem;font-weight:500;color:var(--red)}
.live-badge .dot{width:6px;height:6px;border-radius:50%;background:var(--red);animation:blink 2s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}

/* ‚îÄ‚îÄ STAT ROW ‚îÄ‚îÄ */
.stat-row{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:32px}
.stat-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:var(--radius);padding:20px;backdrop-filter:blur(12px)}
[data-theme="light"] .stat-card{background:#fff}
.stat-card .val{font-size:1.8rem;font-weight:700;line-height:1;margin-bottom:4px;letter-spacing:-.02em}
.stat-card .val.red{color:var(--red)}
.stat-card .val.green{color:var(--green)}
.stat-card .lbl{font-size:.7rem;color:var(--text-dim);font-weight:300;line-height:1.3}

/* ‚îÄ‚îÄ TILE GRID ‚îÄ‚îÄ */
.tiles-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.tiles-header h2{font-size:.72rem;font-weight:600;color:var(--text-dim);text-transform:uppercase;letter-spacing:.1em}
.tile-count{font-size:.72rem;color:var(--text-dim)}
.tiles{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px;margin-bottom:40px}
.tile{background:var(--card-bg);border:1px solid var(--card-border);border-radius:var(--radius);padding:0;cursor:pointer;transition:.2s;overflow:hidden;backdrop-filter:blur(12px);position:relative}
[data-theme="light"] .tile{background:#fff;border-color:#E2E8F0}
.tile:hover{border-color:rgba(61,234,124,.3);transform:translateY(-2px);box-shadow:0 12px 40px rgba(0,0,0,.15)}
.tile.is-new{border-color:rgba(239,68,68,.25)}
.tile.is-new::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--red),var(--orange))}
.tile-top{padding:20px 20px 0;display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
.tile-name{font-size:.92rem;font-weight:600;color:var(--text-bright);line-height:1.3}
.tile-badge{font-size:.6rem;font-weight:600;padding:3px 10px;border-radius:6px;white-space:nowrap;flex-shrink:0;letter-spacing:.03em}
.tile-badge.new{background:rgba(239,68,68,.1);color:var(--red);border:1px solid rgba(239,68,68,.15)}
.tile-badge.complete{background:var(--green-glow);color:var(--green);border:1px solid rgba(61,234,124,.12)}
.tile-meta{padding:4px 20px 16px;font-size:.72rem;color:var(--text-dim);font-weight:300}
.tile-stats{display:grid;grid-template-columns:repeat(3,1fr);border-top:1px solid var(--card-border);background:rgba(0,0,0,.08)}
[data-theme="light"] .tile-stats{background:rgba(0,0,0,.02)}
.tile-stat{padding:14px 12px;text-align:center;border-right:1px solid var(--card-border)}
.tile-stat:last-child{border-right:none}
.tile-stat .tv{font-size:1rem;font-weight:600;color:var(--text-bright);line-height:1}
.tile-stat .tv.red{color:var(--red)}
.tile-stat .tv.yellow{color:var(--yellow)}
.tile-stat .tl{font-size:.58rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.05em;margin-top:3px;font-weight:400}

/* ‚îÄ‚îÄ ACTIVITY STRIP ‚îÄ‚îÄ */
.activity-strip{display:flex;gap:20px;padding:16px 20px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:var(--radius);margin-bottom:32px;align-items:center;flex-wrap:wrap}
[data-theme="light"] .activity-strip{background:#fff}
.activity-strip .icon{font-size:.9rem}
.activity-strip .txt{font-size:.78rem;color:var(--text);font-weight:300}
.activity-strip .time{font-size:.7rem;color:var(--text-dim);margin-left:auto}

/* ‚îÄ‚îÄ CTA BANNER ‚îÄ‚îÄ */
.cta-banner{background:linear-gradient(135deg,rgba(61,234,124,.04),rgba(61,234,124,.01));border:1px solid rgba(61,234,124,.1);border-radius:var(--radius);padding:36px;text-align:center;margin-bottom:32px}
[data-theme="light"] .cta-banner{background:linear-gradient(135deg,#F0FDF4,#ECFDF5)}
.cta-banner h3{font-size:1rem;font-weight:600;color:var(--text-bright);margin-bottom:8px}
.cta-banner p{font-size:.85rem;color:var(--text-dim);max-width:500px;margin:0 auto 16px;font-weight:300}
.cta-btn{display:inline-flex;align-items:center;gap:6px;background:var(--green);color:var(--navy);font-weight:600;font-size:.82rem;padding:10px 22px;border-radius:8px;transition:.2s;letter-spacing:.01em}
.cta-btn:hover{background:var(--green-dark);transform:translateY(-1px);box-shadow:0 6px 20px rgba(61,234,124,.2)}

/* ‚îÄ‚îÄ DETAIL PAGE ‚îÄ‚îÄ */
.back{display:inline-flex;align-items:center;gap:5px;font-size:.78rem;color:var(--text-dim);cursor:pointer;margin-bottom:24px;transition:.15s}
.back:hover{color:var(--green)}
.detail-head{margin-bottom:32px}
.detail-head h2{font-size:1.5rem;font-weight:700;color:var(--text-bright);margin-bottom:4px;letter-spacing:-.01em}
.detail-head .dmeta{font-size:.82rem;color:var(--text-dim);font-weight:300}

/* Alert banner */
.alert-box{background:rgba(239,68,68,.05);border:1px solid rgba(239,68,68,.12);border-radius:var(--radius);padding:20px 24px;margin-bottom:24px;display:flex;align-items:center;gap:16px}
[data-theme="light"] .alert-box{background:#FEF2F2;border-color:#FECACA}
.alert-box .a-icon{font-size:1.2rem;flex-shrink:0}
.alert-box .a-label{font-size:.62rem;font-weight:600;color:var(--red);text-transform:uppercase;letter-spacing:.06em;margin-bottom:2px}
.alert-box .a-text{font-size:.82rem;color:var(--text);font-weight:300;line-height:1.5}

/* Info grid */
.info-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px;margin-bottom:28px}
.info-box{background:var(--card-bg);border:1px solid var(--card-border);border-radius:10px;padding:16px 18px;backdrop-filter:blur(12px)}
[data-theme="light"] .info-box{background:#fff;border-color:#E2E8F0}
.info-box .ib-label{font-size:.6rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.06em;margin-bottom:4px;font-weight:400}
.info-box .ib-value{font-size:.92rem;font-weight:500;color:var(--text-bright)}

/* Findings */
.findings-bar{background:linear-gradient(135deg,rgba(239,68,68,.04),rgba(245,158,11,.03));border:1px solid rgba(239,68,68,.1);border-radius:var(--radius);padding:28px;text-align:center;margin-bottom:28px}
[data-theme="light"] .findings-bar{background:linear-gradient(135deg,#FEF2F2,#FFFBEB)}
.findings-bar .ft{font-size:.68rem;font-weight:600;color:var(--red);text-transform:uppercase;letter-spacing:.08em;margin-bottom:16px}
.findings-row{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.findings-row .fv{font-size:1.8rem;font-weight:700;color:var(--red);line-height:1}
.findings-row .fl{font-size:.72rem;color:var(--text-dim);margin-top:4px;font-weight:300}

/* Table */
.tbl-section{margin-bottom:28px}
.tbl-title{font-size:.88rem;font-weight:600;color:var(--text-bright);margin-bottom:12px}
table{width:100%;border-collapse:collapse}
th{text-align:left;font-size:.6rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.06em;padding:8px 14px;border-bottom:1px solid var(--card-border);font-weight:400}
td{padding:12px 14px;font-size:.82rem;border-bottom:1px solid var(--card-border);font-weight:300;color:var(--text)}
tr:hover{background:rgba(255,255,255,.02)}
[data-theme="light"] tr:hover{background:#F8FAFC}
.pn{font-weight:500;color:var(--text-bright);margin-bottom:1px}
.pa{font-size:.7rem;color:var(--text-dim)}
.badge-won{display:inline-block;background:rgba(239,68,68,.08);color:var(--red);font-size:.65rem;font-weight:500;padding:2px 8px;border-radius:5px}

/* Timeline */
.timeline{margin-bottom:28px}
.tl-item{display:flex;gap:14px;padding:12px 0;border-bottom:1px solid var(--card-border)}
.tl-item:last-child{border:none}
.tl-dot{width:8px;height:8px;border-radius:50%;margin-top:5px;flex-shrink:0}
.tl-dot.red{background:var(--red);box-shadow:0 0 6px rgba(239,68,68,.3)}
.tl-dot.yellow{background:var(--yellow)}
.tl-dot.green{background:var(--green)}
.tl-date{font-size:.68rem;color:var(--text-dim);margin-bottom:1px}
.tl-text{font-size:.82rem;color:var(--text);font-weight:300;line-height:1.5}

/* ‚îÄ‚îÄ ARTICLE ‚îÄ‚îÄ */
.article{max-width:640px}
.article h3{font-size:1.05rem;font-weight:600;color:var(--text-bright);margin:28px 0 12px;letter-spacing:-.01em}
.article h3:first-child{margin-top:0}
.article p{font-size:.88rem;color:var(--text);line-height:1.8;margin-bottom:14px;font-weight:300}
.article ul{margin:0 0 14px 18px;color:var(--text);font-size:.88rem;line-height:2;font-weight:300}
.article .red{color:var(--red);font-weight:500}
.article .green{color:var(--green);font-weight:500}
.article .bold{color:var(--text-bright);font-weight:500}

/* ‚îÄ‚îÄ CONTACTS ‚îÄ‚îÄ */
.empty-state{text-align:center;padding:60px 30px;color:var(--text-dim)}
.empty-state h3{font-size:1rem;margin-bottom:10px;color:var(--text-bright);font-weight:500}
.empty-state p{font-size:.85rem;line-height:1.6}
.filters{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.filters select,.filters input{padding:7px 10px;border:1px solid var(--card-border);border-radius:6px;background:var(--card-bg);color:var(--text);font-size:.8rem;font-family:var(--font)}
[data-theme="light"] .filters select,[data-theme="light"] .filters input{background:#fff}

/* ‚îÄ‚îÄ FORM ‚îÄ‚îÄ */
.form-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;margin-bottom:16px}
.fg{margin-bottom:16px}
.fg label{display:block;font-size:.8rem;font-weight:500;color:var(--text-bright);margin-bottom:6px}
.fg input,.fg textarea,.fg select{width:100%;padding:10px 14px;border:1px solid var(--card-border);border-radius:7px;background:var(--card-bg);color:var(--text);font-size:.85rem;font-family:var(--font);transition:.2s}
[data-theme="light"] .fg input,[data-theme="light"] .fg textarea,[data-theme="light"] .fg select{background:#fff}
.fg input:focus,.fg textarea:focus,.fg select:focus{outline:none;border-color:var(--green)}
.fg textarea{resize:vertical;min-height:80px}
.form-actions{display:flex;gap:10px}
.btn{display:inline-flex;align-items:center;gap:6px;padding:10px 20px;border-radius:7px;font-size:.85rem;font-weight:500;cursor:pointer;transition:.2s;border:none;font-family:var(--font)}
.btn-primary{background:var(--green);color:var(--navy)}
.btn-primary:hover{background:var(--green-dark)}
.btn-secondary{background:var(--card-bg);color:var(--text);border:1px solid var(--card-border)}
.btn-secondary:hover{border-color:var(--green)}
.lookup-row{display:flex;gap:10px}
.lookup-row input{flex:1}
.lookup-btn{background:var(--card-bg);border:1px solid var(--card-border);color:var(--text);padding:10px 14px;border-radius:7px;cursor:pointer;transition:.2s;font-family:var(--font);font-size:.85rem}
.lookup-btn:hover{border-color:var(--green)}
.success-msg{background:rgba(61,234,124,.08);border:1px solid rgba(61,234,124,.15);border-radius:7px;padding:14px;color:var(--green);font-size:.85rem;margin-top:14px;display:none}

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:900px){
.sidebar{display:none}
.wrap{padding:20px 16px}
.stat-row{grid-template-columns:repeat(2,1fr)}
.tiles{grid-template-columns:1fr}
.dash-header{flex-direction:column;align-items:flex-start;gap:12px}
.findings-row{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ -->
<div class="sidebar">
<div class="sb-top">
  <div class="sb-logo">
    <img src="ipex-logo-light.svg" alt="IPEX" class="logo-dark">
    <img src="ipex-logo-dark.svg" alt="IPEX" class="logo-light">
  </div>
  <button class="theme-btn" onclick="toggleTheme()"><span class="ti">‚òÄ</span></button>
</div>
<nav>
  <a class="active" id="nav-dashboard" onclick="go('dashboard')"><span class="nav-i">‚óâ</span> Dashboard</a>
  <div class="nav-sec">Cases</div>
  <div id="nav-builders"></div>
  <div class="nav-sec">Tools</div>
  <a id="nav-contacts" onclick="go('contacts')"><span class="nav-i">‚ä°</span> Contacts</a>
  <a id="nav-article" onclick="go('article')"><span class="nav-i">‚óà</span> The Problem</a>
  <a id="nav-addcase" onclick="go('addcase')"><span class="nav-i">‚äï</span> Add Case</a>
  <div class="nav-sec">System</div>
  <a><span class="nav-i">‚ü≥</span> <span id="last-scan">No scans</span></a>
</nav>
<div class="sb-footer">
  <div class="sb-user">
    <div class="av">PR</div>
    <div><div class="nm">Paul Reid</div><div class="rl">CEO ¬∑ IPEX</div></div>
  </div>
</div>
</div>

<!-- ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ -->
<div class="main">

<!-- ===== DASHBOARD ===== -->
<div class="page active" id="p-dashboard">
<div class="wrap">
  <div class="dash-header">
    <div>
      <h1>Builder Insolvency <span>Intelligence</span></h1>
      <div class="sub">Monitoring Australian construction sector insolvencies in real time</div>
    </div>
    <div class="live-badge"><span class="dot"></span> Live Monitoring</div>
  </div>

  <div class="stat-row">
    <div class="stat-card">
      <div class="val red" id="s-value">‚Äî</div>
      <div class="lbl">Won during insolvent trading</div>
    </div>
    <div class="stat-card">
      <div class="val red" id="s-projects">‚Äî</div>
      <div class="lbl">Projects won while insolvent</div>
    </div>
    <div class="stat-card">
      <div class="val" id="s-days" style="color:var(--text-bright)">‚Äî</div>
      <div class="lbl">Avg insolvency period</div>
    </div>
    <div class="stat-card">
      <div class="val green" id="s-builders">‚Äî</div>
      <div class="lbl">Builders tracked</div>
    </div>
  </div>

  <div class="stat-row" style="margin-top:-20px">
    <div class="stat-card" style="border-left:3px solid var(--yellow)">
      <div class="val yellow" id="s-w1-count" style="font-size:1.4rem">‚Äî</div>
      <div class="lbl">Pre-insolvency window<br><span style="font-size:.62rem">Won within 6mo before deemed insolvent</span></div>
    </div>
    <div class="stat-card" style="border-left:3px solid var(--red)">
      <div class="val red" id="s-w2-count" style="font-size:1.4rem">‚Äî</div>
      <div class="lbl">Insolvent trading window<br><span style="font-size:.62rem">Won while confirmed trading insolvent</span></div>
    </div>
    <div class="stat-card" style="border-left:3px solid var(--orange)">
      <div class="val" id="s-w3-count" style="font-size:1.4rem;color:var(--orange)">‚Äî</div>
      <div class="lbl">Pre-administration window<br><span style="font-size:.62rem">Won within 6mo before administration</span></div>
    </div>
    <div class="stat-card">
      <div class="val" id="s-overlap" style="font-size:1.4rem;color:var(--text-dim)">‚Äî</div>
      <div class="lbl">Overlapping projects<br><span style="font-size:.62rem">Appearing in multiple windows</span></div>
    </div>
  </div>

  <div class="tiles-header">
    <h2>Case Files</h2>
    <div class="tile-count" id="tile-count"></div>
  </div>
  <div class="tiles" id="tileGrid"></div>

  <div id="activity-strip-wrap"></div>

  <div class="cta-banner">
    <h3>Traditional due diligence didn't catch any of these</h3>
    <p>Every builder passed standard financial checks while unable to meet existing obligations.</p>
    <a class="cta-btn" href="mailto:info@ipex.com.au">Talk to IPEX ‚Üí</a>
  </div>
</div>
</div>

<!-- ===== BUILDER DETAIL ===== -->
<div class="page" id="p-builder">
<div class="wrap">
  <div class="back" onclick="go('dashboard')">‚Üê Dashboard</div>
  <div id="builder-content"></div>
</div>
</div>

<!-- ===== CONTACTS ===== -->
<div class="page" id="p-contacts">
<div class="wrap">
  <div class="back" onclick="go('dashboard')">‚Üê Dashboard</div>
  <div class="detail-head"><h2>Contacts</h2><div class="dmeta">Affected developers, lenders, and stakeholders</div></div>
  <div class="filters">
    <select id="f-type"><option value="">All Types</option><option>Developer</option><option>Lender</option></select>
    <select id="f-status"><option value="">All Status</option><option value="not_contacted">Not Contacted</option><option value="contacted">Contacted</option><option value="interested">Interested</option><option value="meeting_booked">Meeting Booked</option></select>
    <input type="text" id="f-search" placeholder="Search...">
  </div>
  <div class="empty-state"><h3>No contacts yet</h3><p>Contact information will populate as case research is completed.</p></div>
</div>
</div>

<!-- ===== THE PROBLEM ===== -->
<div class="page" id="p-article">
<div class="wrap">
  <div class="back" onclick="go('dashboard')">‚Üê Dashboard</div>
  <div class="article">
    <h3>'Insolvent' Builders Winning New Projects?</h3>
    <p>When a commercial builder enters administration, headlines naturally gravitate towards what they might owe, before attention turns to why they failed. And while the specific circumstances may vary, each collapse is inevitably chalked up to a version of "difficult market conditions beyond the builder's control."</p>
    <p>But there's a third element that's rarely discussed. Even if we accept that the ultimate outcome was unavoidable, we may need to start questioning <span class="bold">the timing</span> of these decisions. When should these builders have entered administration? Were the impacted developers (and subcontractors) all truly just 'unlucky', or did some engage builders who were <span class="red">already in significant financial distress</span>?</p>
    <p>You'd assume that an inability to meet existing financial obligations would rule out any possibility of a builder winning a new contract, but our review of builders that have entered administration since early 2023 reveals that it is <span class="bold">typical</span> for commercial builders to:</p>
    <ul>
      <li>Have been <span class="red">trading insolvent for approximately 6 months</span></li>
      <li>Have won the majority of projects that were in progress at the time they entered administration in the <span class="red">6 months prior to</span> or <span class="red">during</span> the insolvent trading period</li>
    </ul>
    <p>Several were deemed to have been trading insolvent for over 12 months and, while it's disturbing enough to think that a builder could 'satisfy' financial due diligence requirements just months prior to becoming insolvent, it gets worse ‚Äî <span class="red">most were able to secure at least one new contract during the insolvent trading period</span>.</p>
    <h3>'Point in Time' Financial Due Diligence is Failing</h3>
    <p>It's clear why a builder might be tempted to push the boundaries in trying to save their business, but the fact that such dire cashflow troubles were not able to be identified will be keeping developers & lenders up at night.</p>
    <p>Can an external party ever hope to reliably distinguish between realistic & overly 'optimistic' cost-to-complete/cashflow forecasts, or identify when critical financial information is incomplete, out of date, or otherwise misleading?</p>
    <p>And as much as we'd like to think that the worst is behind us, <span class="red">builder insolvency is a perennial risk</span> ‚Äî up a further 21% on FY24 according to the latest ASIC data, including multiple high-profile casualties. It's not going away.</p>
    <h3>Your Builder Doesn't Need to Go Under to Ruin Your Project</h3>
    <p>Although builder insolvencies are still relatively rare within the commercial construction sector, the administrator's findings confirm that <span class="bold">cashflow trouble often begins long before signs of distress become outwardly apparent</span>.</p>
    <p>The main source of nervousness for developers we speak with is the <span class="bold">'contagion effect'</span> ‚Äî the considerably more likely risk that progress payments might be used to cashflow their builder's troubled projects. They end up (involuntarily) paying another developer's bills, while their project inherits the cash shortfall.</p>
    <p>For every insolvency that makes the news, there are countless other instances in which the developer is quietly strong-armed into paying significant sums of money outside of the contract to get their project to completion.</p>
    <h3>'Best Practice' is No Longer Best Practice</h3>
    <p>Developers & lenders are continually asking their builders to prove that they're financially sound and that they pay their subbies. The problem is, the industry-standard checks & balances don't actually 'prove' anything.</p>
    <p>Both legally & practically <span class="green">isolating each development from all others is fast becoming the preferred approach</span>. As more developers & lenders put a 'ring-fence' around progress payments, the pool of projects that a distressed builder can 'borrow' from gets smaller.</p>
    <p>No matter how thorough your builder-vetting process, if you're still paying into your builder's operating account & pinning your hopes on that monthly 'stat dec' being true, the chances of your project being impacted are only going up.</p>
    <div class="cta-banner" style="margin-top:32px">
      <h3>Want to prevent builder cashflow issues from impacting your project?</h3>
      <p>IPEX ring-fences progress payments at the project level, ensuring your money stays on your project.</p>
      <a class="cta-btn" href="mailto:info@ipex.com.au">info@ipex.com.au</a>
      <div style="font-size:.75rem;color:var(--text-dim);margin-top:8px">(03) 8456 8032</div>
    </div>
    <p style="font-size:.68rem;color:var(--text-dim);margin-top:16px;font-style:italic">*Insolvent trading period based on the administrator-indicated trading insolvent date. Research conducted by MC & James Curtis.</p>
  </div>
</div>
</div>

<!-- ===== ADD CASE ===== -->
<div class="page" id="p-addcase">
<div class="wrap">
  <div class="back" onclick="go('dashboard')">‚Üê Dashboard</div>
  <div class="detail-head"><h2>Add New Case</h2><div class="dmeta">Submit a builder for insolvency intelligence analysis</div></div>
  <form id="add-form" onsubmit="return submitCase(event)">
    <div class="form-grid">
      <div class="fg"><label>Builder Name *</label><input id="f-name" required></div>
      <div class="fg"><label>ABN</label><div class="lookup-row"><input id="f-abn" placeholder="12 345 678 901"><button type="button" class="lookup-btn" onclick="lookupABN()">Lookup</button></div></div>
    </div>
    <div class="form-grid">
      <div class="fg"><label>Administration Date</label><input type="date" id="f-admin-date"></div>
      <div class="fg"><label>Administrator</label><input id="f-administrator" placeholder="e.g. McGrathNicol"></div>
    </div>
    <div class="form-grid">
      <div class="fg"><label>Type</label><select id="f-admin-type"><option value="">Select</option><option>Voluntary Administration</option><option>Liquidation</option><option>Receivership</option><option>DOCA</option></select></div>
      <div class="fg"><label>Est. Insolvency Start</label><input type="date" id="f-ins-start"></div>
    </div>
    <div class="fg"><label>Source URL</label><input type="url" id="f-source" placeholder="https://..."></div>
    <div class="fg"><label>Notes</label><textarea id="f-notes" placeholder="Context, source info, research notes..."></textarea></div>
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Create Case</button>
      <button type="button" class="btn btn-secondary" onclick="document.getElementById('add-form').reset()">Clear</button>
    </div>
    <div class="success-msg" id="success-msg"></div>
  </form>
</div>
</div>

</div>

<script>
let BD=null,CD=null,MD=null;

document.addEventListener('DOMContentLoaded',async()=>{
  try{
    const[b,c,m]=await Promise.all([
      fetch('data/builders.json').then(r=>r.json()),
      fetch('data/contacts.json').then(r=>r.json()),
      fetch('data/monitoring.json').then(r=>r.json())
    ]);
    BD=b;CD=c;MD=m;
    initDash();initNav();
    const t=localStorage.getItem('theme')||'dark';
    document.documentElement.setAttribute('data-theme',t);
    updToggle();
  }catch(e){console.error('Data load error:',e)}
});

function initDash(){
  if(!BD)return;
  const m=BD.meta;
  const wt=m.windowTotals||{};
  const w1=wt.preInsolvency||{};
  const w2=wt.insolventTrading||{};
  const w3=wt.preAdministration||{};
  document.getElementById('s-value').textContent=fmtCur(w2.value||m.totalValueAtRisk);
  document.getElementById('s-days').textContent=m.avgDaysInsolvent+' days';
  document.getElementById('s-projects').textContent=w2.count||m.totalProjectsAtRisk;
  document.getElementById('s-builders').textContent=m.totalBuilders;
  document.getElementById('s-w1-count').textContent=(w1.count||0)+' projects ¬∑ '+fmtCur(w1.value||0);
  document.getElementById('s-w2-count').textContent=(w2.count||0)+' projects ¬∑ '+fmtCur(w2.value||0);
  document.getElementById('s-w3-count').textContent=(w3.count||0)+' projects ¬∑ '+fmtCur(w3.value||0);
  // Count overlapping projects
  let overlap=0;
  BD.builders.forEach(b=>{(b.projects||[]).forEach(p=>{if((p.windows||[]).length>1)overlap++})});
  document.getElementById('s-overlap').textContent=overlap+' projects';
  document.getElementById('tile-count').textContent=`${m.totalBuilders} builders tracked`;
  
  const grid=document.getElementById('tileGrid');
  grid.innerHTML='';
  const sorted=[...BD.builders].sort((a,b)=>new Date(b.insolvency.administrationDate)-new Date(a.insolvency.administrationDate));
  sorted.forEach(b=>{grid.appendChild(mkTile(b))});
  
  // Activity strip
  const wrap=document.getElementById('activity-strip-wrap');
  if(MD.lastScan){
    const d=new Date(MD.lastScan);
    wrap.innerHTML=`<div class="activity-strip"><span class="icon">‚ü≥</span><span class="txt">Last system scan completed</span><span class="time">${d.toLocaleDateString()} ${d.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})}</span></div>`;
  }
}

function mkTile(b){
  const el=document.createElement('div');
  el.className=`tile${b.status==='new'?' is-new':''}`;
  el.onclick=()=>go('builder',b.id);
  const ad=new Date(b.insolvency.administrationDate);
  const dateStr=ad.toLocaleDateString('en-AU',{day:'2-digit',month:'short',year:'numeric'});
  const days=b.insolvency.insolvencyPeriodDays||b.insolvency.daysInsolventTrading;
  const ws=b.windowStats||{};
  const w2=ws.insolventTrading||{};
  const proj=w2.count||b.summary.totalProjectsAtRisk||0;
  const val=w2.value||b.summary.totalValueAtRisk||0;
  const meta=[b.state,dateStr,b.insolvency.administrator].filter(Boolean).join(' ¬∑ ');
  
  el.innerHTML=`
    <div class="tile-top">
      <div class="tile-name">${b.name}</div>
      <span class="tile-badge ${b.status==='new'?'new':'complete'}">${b.status==='new'?'NEW':'COMPLETE'}</span>
    </div>
    <div class="tile-meta">${meta}</div>
    <div class="tile-stats">
      <div class="tile-stat">
        <div class="tv ${days===null?'yellow':(days>0?'red':'yellow')}">${days===null?'TBC':days+'d'}</div>
        <div class="tl">Insolvent</div>
      </div>
      <div class="tile-stat">
        <div class="tv ${proj>0?'red':'yellow'}">${proj||'TBC'}</div>
        <div class="tl">Projects</div>
      </div>
      <div class="tile-stat">
        <div class="tv ${val>0?'red':'yellow'}">${val?fmtCur(val):'TBC'}</div>
        <div class="tl">Value</div>
      </div>
    </div>`;
  return el;
}

function initNav(){
  const nb=document.getElementById('nav-builders');
  nb.innerHTML='';
  BD.builders.forEach(b=>{
    const a=document.createElement('a');
    a.className='nav-new';
    a.onclick=()=>go('builder',b.id);
    a.innerHTML=`${b.status==='new'?'<span class="pulse-dot"></span>':''}<span class="nav-i">‚óª</span> ${b.name.replace(/ (Pty Ltd|Constructions?|Group)$/i,'')}`;
    nb.appendChild(a);
  });
  if(MD.lastScan){
    const d=new Date(MD.lastScan);
    document.getElementById('last-scan').textContent=`Scan: ${d.toLocaleDateString()}`;
  }
}

function go(page,id=null){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'));
  if(page==='builder'&&id){
    showBuilder(id);
    document.getElementById('p-builder').classList.add('active');
  }else{
    document.getElementById('p-'+page).classList.add('active');
    const n=document.getElementById('nav-'+page);
    if(n)n.classList.add('active');
  }
}

function showBuilder(id){
  const b=BD.builders.find(x=>x.id===id);
  if(!b)return;
  const c=document.getElementById('builder-content');
  let h=`<div class="detail-head"><h2>${b.name}</h2><div class="dmeta">${[b.state,b.abn?'ABN '+b.abn:'',b.acn?'ACN '+b.acn:''].filter(Boolean).join(' ¬∑ ')}</div></div>`;
  
  if(b.status==='new'){
    h+=`<div class="alert-box"><div class="a-icon">üî¥</div><div><div class="a-label">New Case ‚Äî Research In Progress</div><div class="a-text">${b.summary.narrative}</div></div></div>`;
  }
  
  const ws=b.windowStats||{};
  const w1=ws.preInsolvency||{};const w2=ws.insolventTrading||{};const w3=ws.preAdministration||{};
  h+=`<div class="info-grid">
    <div class="info-box" style="border-left:3px solid var(--yellow)"><div class="ib-label">Pre-Insolvency Window</div><div class="ib-value" style="color:var(--yellow)">${w1.count||0} projects ¬∑ ${fmtCur(w1.value||0)}</div><div style="font-size:.65rem;color:var(--text-dim);margin-top:2px">Won within 6mo before deemed insolvent</div></div>
    <div class="info-box" style="border-left:3px solid var(--red)"><div class="ib-label">Insolvent Trading Window</div><div class="ib-value" style="color:var(--red)">${w2.count||0} projects ¬∑ ${fmtCur(w2.value||0)}</div><div style="font-size:.65rem;color:var(--text-dim);margin-top:2px">Won while confirmed trading insolvent</div></div>
    <div class="info-box" style="border-left:3px solid var(--orange)"><div class="ib-label">Pre-Administration Window</div><div class="ib-value" style="color:var(--orange)">${w3.count||0} projects ¬∑ ${fmtCur(w3.value||0)}</div><div style="font-size:.65rem;color:var(--text-dim);margin-top:2px">Won within 6mo before entering administration</div></div>
    <div class="info-box"><div class="ib-label">Developers Affected</div><div class="ib-value">${b.summary.totalDevelopersAffected||'TBC'}</div></div>
  </div>`;
  
  const ipd=b.insolvency.insolvencyPeriodDays||b.insolvency.daysInsolventTrading;
  const isEst=b.insolvency.insolvencyStartEstimated;
  h+=`<div class="info-grid">
    <div class="info-box"><div class="ib-label">Deemed Insolvent From</div><div class="ib-value" style="color:var(--red)">${b.insolvency.estimatedInsolvencyStart?new Date(b.insolvency.estimatedInsolvencyStart).toLocaleDateString():'Pending Report'}${isEst?' <span style=\"font-size:.65rem;color:var(--yellow)\">(estimated)</span>':''}</div></div>
    <div class="info-box"><div class="ib-label">Administration Date</div><div class="ib-value" style="color:var(--red)">${new Date(b.insolvency.administrationDate).toLocaleDateString()}</div></div>
    <div class="info-box"><div class="ib-label">Insolvent Trading Period</div><div class="ib-value" style="color:${ipd>0?'var(--red)':'var(--yellow)'}">${ipd===null||ipd===undefined?'Pending':ipd+' days'}</div></div>
    <div class="info-box"><div class="ib-label">Administrator</div><div class="ib-value">${b.insolvency.administrator||'TBC'}</div></div>
    ${b.insolvency.creditorsMeetingDate?`<div class="info-box"><div class="ib-label">Creditors Meeting</div><div class="ib-value">${new Date(b.insolvency.creditorsMeetingDate).toLocaleDateString()}</div></div>`:''}
  </div>`;
  
  if(b.projects&&b.projects.length>0){
    // Findings bar with three windows
    h+=`<div class="findings-bar"><div class="ft">Key Findings ‚Äî Three Windows of Risk</div><div class="findings-row">
      <div><div class="fv" style="color:var(--yellow)">${w1.count||0}</div><div class="fl">Pre-insolvency window<br><span style="font-size:.6rem">${fmtCur(w1.value||0)}</span></div></div>
      <div><div class="fv">${w2.count||0}</div><div class="fl">Insolvent trading window<br><span style="font-size:.6rem">${fmtCur(w2.value||0)}</span></div></div>
      <div><div class="fv" style="color:var(--orange)">${w3.count||0}</div><div class="fl">Pre-administration window<br><span style="font-size:.6rem">${fmtCur(w3.value||0)}</span></div></div>
    </div></div>`;
    
    // Window badges helper
    const wBadge=(wins)=>{
      if(!wins||!wins.length)return'';
      return wins.map(w=>{
        if(w==='pre-insolvency')return'<span style="display:inline-block;background:rgba(245,158,11,.1);color:var(--yellow);font-size:.6rem;font-weight:500;padding:2px 7px;border-radius:4px;margin-right:3px">PRE-INSOLVENCY</span>';
        if(w==='insolvent-trading')return'<span style="display:inline-block;background:rgba(239,68,68,.1);color:var(--red);font-size:.6rem;font-weight:500;padding:2px 7px;border-radius:4px;margin-right:3px">INSOLVENT TRADING</span>';
        if(w==='pre-administration')return'<span style="display:inline-block;background:rgba(249,115,22,.1);color:var(--orange);font-size:.6rem;font-weight:500;padding:2px 7px;border-radius:4px;margin-right:3px">PRE-ADMIN</span>';
        return'';
      }).join('');
    };

    // Projects table with window badges
    const windowOrder=['insolvent-trading','pre-administration','pre-insolvency'];
    const projSorted=[...b.projects].sort((a,b)=>{
      const aW=(a.windows||[]).includes('insolvent-trading')?0:(a.windows||[]).includes('pre-administration')?1:2;
      const bW=(b.windows||[]).includes('insolvent-trading')?0:(b.windows||[]).includes('pre-administration')?1:2;
      return aW-bW;
    });
    
    h+=`<div class="tbl-section"><div class="tbl-title">All Projects ‚Äî Window Classification</div><div style="overflow-x:auto"><table><thead><tr><th>Project</th><th>Developer</th><th>Contract Date</th><th>Value</th><th>Windows</th></tr></thead><tbody>`;
    projSorted.forEach(p=>{
      const cd=p.contractDate?new Date(p.contractDate).toLocaleDateString('en-AU',{day:'2-digit',month:'short',year:'numeric'}):'‚Äî';
      h+=`<tr><td><div class="pn">${p.projectName}</div><div class="pa">${p.address||''}</div></td><td>${p.developer||'‚Äî'}</td><td style="font-size:.8rem">${cd}</td><td style="font-weight:500;color:var(--text-bright)">${fmtCur(p.estimatedValue)}</td><td>${wBadge(p.windows)}</td></tr>`;
    });
    h+=`</tbody></table></div></div>`;
  }
  
  if(b.timeline&&b.timeline.length>0){
    h+=`<div class="tiles-header" style="margin-top:24px"><h2>Timeline</h2></div><div class="timeline">`;
    b.timeline.forEach(e=>{
      const dc=e.type==='administration'||e.type==='insolvency'?'red':e.type==='project_won'?'yellow':'green';
      h+=`<div class="tl-item"><div class="tl-dot ${dc}"></div><div><div class="tl-date">${new Date(e.date).toLocaleDateString()}</div><div class="tl-text">${e.event}</div></div></div>`;
    });
    h+=`</div>`;
  }
  
  if(b.summary.narrative&&b.status!=='new'){
    h+=`<div class="tiles-header" style="margin-top:24px"><h2>IPEX Analysis</h2></div><p style="font-size:.88rem;line-height:1.7;margin-bottom:20px">${b.summary.narrative}</p>`;
  }
  
  if(b.research){
    const t1=b.research.tier1||{};
    const confColor=b.research.confidence==='high'?'var(--green)':b.research.confidence==='medium'?'var(--yellow)':'var(--red)';
    h+=`<div class="tiles-header" style="margin-top:24px"><h2>Research Provenance</h2></div><div class="info-grid">
      <div class="info-box"><div class="ib-label">Tier 1 Coverage</div><div class="ib-value" style="color:${t1.coverage>=67?'var(--green)':'var(--yellow)'}">${t1.coverage||0}%</div><div style="font-size:.6rem;color:var(--text-dim);margin-top:2px">Free public sources</div></div>
      <div class="info-box"><div class="ib-label">Confidence</div><div class="ib-value" style="color:${confColor};text-transform:capitalize">${b.research.confidence||'unknown'}</div></div>
      <div class="info-box"><div class="ib-label">Articles Found</div><div class="ib-value">${t1.articlesSearched||0}</div></div>
      <div class="info-box"><div class="ib-label">Court Records</div><div class="ib-value">${t1.courtRecords||0}</div></div>
    </div>`;
    
    // Show debts and creditor count if available
    const debts=b.insolvency.totalDebts;const creds=b.insolvency.creditorCount;
    if(debts||creds){
      h+=`<div class="info-grid">`;
      if(debts)h+=`<div class="info-box"><div class="ib-label">Total Debts Owed</div><div class="ib-value" style="color:var(--red)">${fmtCur(debts)}</div><div style="font-size:.55rem;color:var(--text-dim);margin-top:2px">Tier ${b.insolvency.totalDebtsTier||'?'} source</div></div>`;
      if(creds)h+=`<div class="info-box"><div class="ib-label">Creditors</div><div class="ib-value">${creds}</div></div>`;
      h+=`</div>`;
    }
    
    // Gaps and recommendations
    if(t1.gaps&&t1.gaps.length){
      h+=`<div style="background:rgba(245,158,11,.05);border:1px solid rgba(245,158,11,.12);border-radius:8px;padding:14px 18px;margin-bottom:16px"><div style="font-size:.65rem;font-weight:600;color:var(--yellow);text-transform:uppercase;margin-bottom:6px">Data Gaps</div>`;
      t1.gaps.forEach(g=>{h+=`<div style="font-size:.8rem;color:var(--text);margin-bottom:3px">‚Ä¢ ${g}</div>`});
      h+=`</div>`;
    }
    if(t1.recommendTier3){
      h+=`<div style="background:rgba(239,68,68,.05);border:1px solid rgba(239,68,68,.12);border-radius:8px;padding:14px 18px;margin-bottom:16px"><div style="font-size:.65rem;font-weight:600;color:var(--red);text-transform:uppercase;margin-bottom:4px">üí° Recommended: ASIC Form 530 Purchase</div><div style="font-size:.8rem;color:var(--text)">High-value case with significant data gaps. Purchase the administrator's report from ASIC Connect ($42) for complete insolvency date and creditor details.</div></div>`;
    }
    
    // Source articles
    if(b.research.articles&&b.research.articles.length){
      h+=`<div class="tiles-header" style="margin-top:16px"><h2>Source Articles</h2></div>`;
      b.research.articles.slice(0,5).forEach(a=>{
        const tierBadge=a.tier===1?'<span style="background:var(--green-glow);color:var(--green);font-size:.55rem;padding:2px 6px;border-radius:3px;margin-left:6px">TIER 1</span>':a.tier===2?'<span style="background:rgba(245,158,11,.1);color:var(--yellow);font-size:.55rem;padding:2px 6px;border-radius:3px;margin-left:6px">TIER 2</span>':'';
        h+=`<div style="padding:8px 0;border-bottom:1px solid var(--card-border)"><a href="${a.url}" target="_blank" style="font-size:.82rem;color:var(--green);font-weight:400">${a.title||'Article'}</a>${tierBadge}<div style="font-size:.72rem;color:var(--text-dim);margin-top:2px">${(a.snippet||'').slice(0,150)}</div></div>`;
      });
    }
  }
  
  const w2v=w2.value||0;const w2c=w2.count||0;
  h+=`<div class="cta-banner"><h3>${w2c>0?`${w2c} projects worth ${fmtCur(w2v)} won during confirmed insolvent trading`:(b.projects&&b.projects.length>0?`${b.projects.length} projects identified across risk windows`:'Case file will update as information becomes available')}</h3><p>${w2c>0?'Won after the builder was deemed insolvent by the administrator. Traditional due diligence didn\'t catch it.':(b.status==='new'?'Analysis methodology will be applied once the administrator\'s report is published.':'All projects classified across pre-insolvency, insolvent trading, and pre-administration windows.')}</p><a class="cta-btn" href="mailto:info@ipex.com.au">Learn How IPEX Prevents This ‚Üí</a></div>`;
  
  c.innerHTML=h;
}

function toggleTheme(){
  const c=document.documentElement.getAttribute('data-theme');
  const n=c==='dark'?'light':'dark';
  document.documentElement.setAttribute('data-theme',n);
  localStorage.setItem('theme',n);
  updToggle();
}
function updToggle(){
  const t=document.documentElement.getAttribute('data-theme');
  document.querySelector('.ti').textContent=t==='dark'?'‚òÄ':'üåô';
}
function fmtCur(a){
  if(!a)return'$0';
  if(a>=1e6)return'$'+(a/1e6).toFixed(1)+'M';
  if(a>=1e3)return'$'+(a/1e3).toFixed(0)+'K';
  return'$'+a.toLocaleString();
}

function submitCase(e){
  e.preventDefault();
  const fd={
    builderName:document.getElementById('f-name').value,
    abn:document.getElementById('f-abn').value,
    administrationDate:document.getElementById('f-admin-date').value,
    administrator:document.getElementById('f-administrator').value,
    adminType:document.getElementById('f-admin-type').value,
    insolvencyStart:document.getElementById('f-ins-start').value,
    sourceUrl:document.getElementById('f-source').value,
    notes:document.getElementById('f-notes').value,
    submitted:new Date().toISOString()
  };
  const drafts=JSON.parse(localStorage.getItem('ipex-case-drafts')||'[]');
  drafts.push(fd);
  localStorage.setItem('ipex-case-drafts',JSON.stringify(drafts));
  
  const title=`[NEW CASE] ${fd.builderName}`;
  const body=[`**Builder:** ${fd.builderName}`,fd.abn?`**ABN:** ${fd.abn}`:'',fd.administrationDate?`**Date:** ${fd.administrationDate}`:'',fd.administrator?`**Administrator:** ${fd.administrator}`:'',fd.adminType?`**Type:** ${fd.adminType}`:'',fd.notes?`\n**Notes:**\n${fd.notes}`:''].filter(Boolean).join('\n');
  const ghUrl=`https://github.com/jpjarvisai-cmd/ipex-terminal-demo/issues/new?title=${encodeURIComponent(title)}&body=${encodeURIComponent(body)}&labels=new-case`;
  
  const s=document.getElementById('success-msg');
  s.innerHTML=`‚úÖ Case saved. <a href="${ghUrl}" target="_blank" style="color:var(--green);text-decoration:underline">Submit to pipeline ‚Üí</a>`;
  s.style.display='block';
  setTimeout(()=>{document.getElementById('add-form').reset()},3000);
  return false;
}
function lookupABN(){alert('ABN lookup available in Phase 2. Enter ABN manually if known.')}
</script>
</body>
</html>
